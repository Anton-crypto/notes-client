{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\toni_\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\notes-app\\\\notes-client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"src/app/services/category.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/form-field\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/material/select\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/core\";\nimport * as i9 from \"@angular/material/button\";\n\nfunction CategoryCreateFormComponent_mat_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r2.title);\n  }\n}\n\nfunction CategoryCreateFormComponent_mat_form_field_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 3)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 12);\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class CategoryCreateFormComponent {\n  constructor(dialogRef, categoryService, fb) {\n    this.dialogRef = dialogRef;\n    this.categoryService = categoryService;\n    this.fb = fb;\n    this.title = 'category-create-form';\n    this.categoriesSelect = [];\n    this.categoryForm = this.fb.group({\n      todoText: ['', Validators.required],\n      categoryTitle: [''],\n      categorySelectItem: ['']\n    });\n  }\n\n  ngOnInit() {\n    this.getCategoryTitle();\n    this.categoryService.queryCategories();\n  }\n\n  ngOnDestroy() {\n    this.categoryService.categories.complete();\n    this.categoryService.queryCategories();\n  }\n\n  ngOnChanges() {\n    this.getCategoryTitle();\n  }\n\n  getCategoryTitle() {\n    this.categoryService.categories.subscribe(listTitle => {\n      this.categoriesSelect = [...listTitle, {\n        title: \"Новая категория\",\n        id: \"\"\n      }];\n    });\n  }\n\n  onSubmit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let text = _this.categoryForm.value.todoText;\n      let categoryId = _this.categoryForm.value.categorySelectItem;\n      let categoryName = _this.categoryForm.value.categoryTitle;\n\n      if (categoryId == \"\") {\n        yield _this.createCategory(categoryName, text);\n        return;\n      }\n\n      yield _this.createTodo(text, categoryId);\n    })();\n  }\n\n  createCategory(categoryName, text) {\n    let queryRequest = `\n      mutation {\n        addCategory (categoryArgs: {\n          categoryName: \"${categoryName}\"\n          text: \"${text}\"\n        }) {\n          id,\n          title,\n        }\n      }\n    `;\n    this.categoryService.mutationCategories(queryRequest);\n    this.dialogRef.close();\n  }\n\n  createTodo(text, categoryId) {\n    let queryRequest = `\n      mutation {\n        addTodo (categoryArgs: {\n          text: \"${text}\"\n          categoryId: \"${categoryId}\"\n        }) {\n          id,\n          isCompleted,\n          text,\n        }\n      }\n    `;\n    this.categoryService.mutationCategories(queryRequest);\n    this.dialogRef.close();\n  }\n\n  onNoClick() {\n    this.dialogRef.close();\n  }\n\n}\n\nCategoryCreateFormComponent.ɵfac = function CategoryCreateFormComponent_Factory(t) {\n  return new (t || CategoryCreateFormComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.CategoryService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n};\n\nCategoryCreateFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CategoryCreateFormComponent,\n  selectors: [[\"app-category-create-form\"]],\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 19,\n  vars: 4,\n  consts: [[\"mat-dialog-title\", \"\", 1, \"dialog-title-castom\"], [1, \"example-form\", \"dialog-form-castom\", 3, \"formGroup\", \"ngSubmit\"], [\"mat-dialog-content\", \"\"], [\"appearance\", \"fill\", 1, \"dialog-form-castom-item\"], [\"matInput\", \"\", \"formControlName\", \"todoText\"], [\"formControlName\", \"categorySelectItem\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"example-full-width\", \"appearance\", \"fill\", \"class\", \"dialog-form-castom-item\", 4, \"ngIf\"], [\"mat-dialog-actions\", \"\", 1, \"dialog-actions-castom\"], [\"mat-button\", \"\", \"mat-dialog-close\", \"\"], [\"mat-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [3, \"value\"], [\"matInput\", \"\", \"formControlName\", \"categoryTitle\"]],\n  template: function CategoryCreateFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵtext(1, \"\\u041D\\u043E\\u0432\\u0430\\u044F \\u0437\\u0430\\u0434\\u0430\\u0447\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 1);\n      i0.ɵɵlistener(\"ngSubmit\", function CategoryCreateFormComponent_Template_form_ngSubmit_2_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"mat-form-field\", 3)(5, \"mat-label\");\n      i0.ɵɵtext(6, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0435\\u0438 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438...\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"mat-form-field\", 3)(9, \"mat-label\");\n      i0.ɵɵtext(10, \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"mat-select\", 5);\n      i0.ɵɵtemplate(12, CategoryCreateFormComponent_mat_option_12_Template, 2, 2, \"mat-option\", 6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(13, CategoryCreateFormComponent_mat_form_field_13_Template, 4, 0, \"mat-form-field\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 8)(15, \"button\", 9);\n      i0.ɵɵtext(16, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"button\", 10);\n      i0.ɵɵtext(18, \"Ok\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.categoryForm);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.categoriesSelect);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.categoryForm.value.categorySelectItem == \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"disabled\", !ctx.categoryForm.valid);\n    }\n  },\n  directives: [i1.MatDialogTitle, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i1.MatDialogContent, i4.MatFormField, i4.MatLabel, i5.MatInput, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i6.MatSelect, i7.NgForOf, i8.MatOption, i7.NgIf, i1.MatDialogActions, i9.MatButton, i1.MatDialogClose],\n  styles: [\".dialog-actions-castom[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n.dialog-title-castom[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n.dialog-form-castom[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n.dialog-form-castom-item[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVnb3J5LWNyZWF0ZS1mb3JtLmNvbXBvbmVudC5zY3NzIiwiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwlRDAlQTAlRDAlQjAlRDAlQjElRDAlQkUlRDElODclRDAlQjglRDAlQjklMjAlRDElODElRDElODIlRDAlQkUlRDAlQkJcXG5vdGVzLWFwcFxcbm90ZXMtY2xpZW50XFxzcmNcXGFwcFxcY29tcG9uZW50c1xcY2F0ZWdvcmllc1xcY2F0ZWdvcnktY3JlYXRlLWZvcm1cXGNhdGVnb3J5LWNyZWF0ZS1mb3JtLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNFO0VBQ0UsYUFBQTtFQUNBLDhCQUFBO0FDQUo7QURFRTtFQUNFLGtCQUFBO0FDQUo7QURFRTtFQUNFLFdBQUE7QUNBSjtBRENJO0VBQ0UsV0FBQTtBQ0NOIiwiZmlsZSI6ImNhdGVnb3J5LWNyZWF0ZS1mb3JtLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmRpYWxvZyB7XHJcbiAgJi1hY3Rpb25zLWNhc3RvbSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIH1cclxuICAmLXRpdGxlLWNhc3RvbSB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgfVxyXG4gICYtZm9ybS1jYXN0b20ge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICAmLWl0ZW0ge1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbiIsIi5kaWFsb2ctYWN0aW9ucy1jYXN0b20ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59XG4uZGlhbG9nLXRpdGxlLWNhc3RvbSB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbi5kaWFsb2ctZm9ybS1jYXN0b20ge1xuICB3aWR0aDogMTAwJTtcbn1cbi5kaWFsb2ctZm9ybS1jYXN0b20taXRlbSB7XG4gIHdpZHRoOiAxMDAlO1xufSJdfQ== */\"]\n});","map":{"version":3,"sources":["C:/Users/toni_/OneDrive/Рабочий стол/notes-app/notes-client/src/app/components/categories/category-create-form/category-create-form.component.ts"],"names":["Validators","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","CategoryCreateFormComponent_mat_option_12_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","item_r2","$implicit","ɵɵproperty","id","ɵɵadvance","ɵɵtextInterpolate","title","CategoryCreateFormComponent_mat_form_field_13_Template","ɵɵelement","CategoryCreateFormComponent","constructor","dialogRef","categoryService","fb","categoriesSelect","categoryForm","group","todoText","required","categoryTitle","categorySelectItem","ngOnInit","getCategoryTitle","queryCategories","ngOnDestroy","categories","complete","ngOnChanges","subscribe","listTitle","onSubmit","text","value","categoryId","categoryName","createCategory","createTodo","queryRequest","mutationCategories","close","onNoClick","ɵfac","CategoryCreateFormComponent_Factory","t","ɵɵdirectiveInject","MatDialogRef","CategoryService","FormBuilder","ɵcmp","ɵɵdefineComponent","type","selectors","features","ɵɵNgOnChangesFeature","decls","vars","consts","template","CategoryCreateFormComponent_Template","ɵɵlistener","CategoryCreateFormComponent_Template_form_ngSubmit_2_listener","ɵɵtemplate","valid","directives","MatDialogTitle","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","MatDialogContent","MatFormField","MatLabel","MatInput","DefaultValueAccessor","NgControlStatus","FormControlName","MatSelect","NgForOf","MatOption","NgIf","MatDialogActions","MatButton","MatDialogClose","styles"],"mappings":"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","sourcesContent":["import { Validators } from '@angular/forms';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/material/dialog\";\r\nimport * as i2 from \"src/app/services/category.service\";\r\nimport * as i3 from \"@angular/forms\";\r\nimport * as i4 from \"@angular/material/form-field\";\r\nimport * as i5 from \"@angular/material/input\";\r\nimport * as i6 from \"@angular/material/select\";\r\nimport * as i7 from \"@angular/common\";\r\nimport * as i8 from \"@angular/material/core\";\r\nimport * as i9 from \"@angular/material/button\";\r\nfunction CategoryCreateFormComponent_mat_option_12_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"mat-option\", 11);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const item_r2 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"value\", item_r2.id);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(item_r2.title);\r\n} }\r\nfunction CategoryCreateFormComponent_mat_form_field_13_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"mat-form-field\", 3)(1, \"mat-label\");\r\n    i0.ɵɵtext(2, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438...\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(3, \"input\", 12);\r\n    i0.ɵɵelementEnd();\r\n} }\r\nexport class CategoryCreateFormComponent {\r\n    constructor(dialogRef, categoryService, fb) {\r\n        this.dialogRef = dialogRef;\r\n        this.categoryService = categoryService;\r\n        this.fb = fb;\r\n        this.title = 'category-create-form';\r\n        this.categoriesSelect = [];\r\n        this.categoryForm = this.fb.group({\r\n            todoText: ['', Validators.required],\r\n            categoryTitle: [''],\r\n            categorySelectItem: [''],\r\n        });\r\n    }\r\n    ngOnInit() {\r\n        this.getCategoryTitle();\r\n        this.categoryService.queryCategories();\r\n    }\r\n    ngOnDestroy() {\r\n        this.categoryService.categories.complete();\r\n        this.categoryService.queryCategories();\r\n    }\r\n    ngOnChanges() {\r\n        this.getCategoryTitle();\r\n    }\r\n    getCategoryTitle() {\r\n        this.categoryService.categories.subscribe((listTitle) => {\r\n            this.categoriesSelect = [...listTitle, {\r\n                    title: \"Новая категория\",\r\n                    id: \"\"\r\n                }];\r\n        });\r\n    }\r\n    async onSubmit() {\r\n        let text = this.categoryForm.value.todoText;\r\n        let categoryId = this.categoryForm.value.categorySelectItem;\r\n        let categoryName = this.categoryForm.value.categoryTitle;\r\n        if (categoryId == \"\") {\r\n            await this.createCategory(categoryName, text);\r\n            return;\r\n        }\r\n        await this.createTodo(text, categoryId);\r\n    }\r\n    createCategory(categoryName, text) {\r\n        let queryRequest = `\n      mutation {\n        addCategory (categoryArgs: {\n          categoryName: \"${categoryName}\"\n          text: \"${text}\"\n        }) {\n          id,\n          title,\n        }\n      }\n    `;\r\n        this.categoryService.mutationCategories(queryRequest);\r\n        this.dialogRef.close();\r\n    }\r\n    createTodo(text, categoryId) {\r\n        let queryRequest = `\n      mutation {\n        addTodo (categoryArgs: {\n          text: \"${text}\"\n          categoryId: \"${categoryId}\"\n        }) {\n          id,\n          isCompleted,\n          text,\n        }\n      }\n    `;\r\n        this.categoryService.mutationCategories(queryRequest);\r\n        this.dialogRef.close();\r\n    }\r\n    onNoClick() {\r\n        this.dialogRef.close();\r\n    }\r\n}\r\nCategoryCreateFormComponent.ɵfac = function CategoryCreateFormComponent_Factory(t) { return new (t || CategoryCreateFormComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.CategoryService), i0.ɵɵdirectiveInject(i3.FormBuilder)); };\r\nCategoryCreateFormComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CategoryCreateFormComponent, selectors: [[\"app-category-create-form\"]], features: [i0.ɵɵNgOnChangesFeature], decls: 19, vars: 4, consts: [[\"mat-dialog-title\", \"\", 1, \"dialog-title-castom\"], [1, \"example-form\", \"dialog-form-castom\", 3, \"formGroup\", \"ngSubmit\"], [\"mat-dialog-content\", \"\"], [\"appearance\", \"fill\", 1, \"dialog-form-castom-item\"], [\"matInput\", \"\", \"formControlName\", \"todoText\"], [\"formControlName\", \"categorySelectItem\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"example-full-width\", \"appearance\", \"fill\", \"class\", \"dialog-form-castom-item\", 4, \"ngIf\"], [\"mat-dialog-actions\", \"\", 1, \"dialog-actions-castom\"], [\"mat-button\", \"\", \"mat-dialog-close\", \"\"], [\"mat-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [3, \"value\"], [\"matInput\", \"\", \"formControlName\", \"categoryTitle\"]], template: function CategoryCreateFormComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h1\", 0);\r\n        i0.ɵɵtext(1, \"\\u041D\\u043E\\u0432\\u0430\\u044F \\u0437\\u0430\\u0434\\u0430\\u0447\\u0430\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(2, \"form\", 1);\r\n        i0.ɵɵlistener(\"ngSubmit\", function CategoryCreateFormComponent_Template_form_ngSubmit_2_listener() { return ctx.onSubmit(); });\r\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"mat-form-field\", 3)(5, \"mat-label\");\r\n        i0.ɵɵtext(6, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0435\\u0438 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438...\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(7, \"input\", 4);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(8, \"mat-form-field\", 3)(9, \"mat-label\");\r\n        i0.ɵɵtext(10, \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"mat-select\", 5);\r\n        i0.ɵɵtemplate(12, CategoryCreateFormComponent_mat_option_12_Template, 2, 2, \"mat-option\", 6);\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵtemplate(13, CategoryCreateFormComponent_mat_form_field_13_Template, 4, 0, \"mat-form-field\", 7);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(14, \"div\", 8)(15, \"button\", 9);\r\n        i0.ɵɵtext(16, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(17, \"button\", 10);\r\n        i0.ɵɵtext(18, \"Ok\");\r\n        i0.ɵɵelementEnd()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"formGroup\", ctx.categoryForm);\r\n        i0.ɵɵadvance(10);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.categoriesSelect);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.categoryForm.value.categorySelectItem == \"\");\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵproperty(\"disabled\", !ctx.categoryForm.valid);\r\n    } }, directives: [i1.MatDialogTitle, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i1.MatDialogContent, i4.MatFormField, i4.MatLabel, i5.MatInput, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i6.MatSelect, i7.NgForOf, i8.MatOption, i7.NgIf, i1.MatDialogActions, i9.MatButton, i1.MatDialogClose], styles: [\".dialog-actions-castom[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n.dialog-title-castom[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n.dialog-form-castom[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n.dialog-form-castom-item[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVnb3J5LWNyZWF0ZS1mb3JtLmNvbXBvbmVudC5zY3NzIiwiLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwlRDAlQTAlRDAlQjAlRDAlQjElRDAlQkUlRDElODclRDAlQjglRDAlQjklMjAlRDElODElRDElODIlRDAlQkUlRDAlQkJcXG5vdGVzLWFwcFxcbm90ZXMtY2xpZW50XFxzcmNcXGFwcFxcY29tcG9uZW50c1xcY2F0ZWdvcmllc1xcY2F0ZWdvcnktY3JlYXRlLWZvcm1cXGNhdGVnb3J5LWNyZWF0ZS1mb3JtLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNFO0VBQ0UsYUFBQTtFQUNBLDhCQUFBO0FDQUo7QURFRTtFQUNFLGtCQUFBO0FDQUo7QURFRTtFQUNFLFdBQUE7QUNBSjtBRENJO0VBQ0UsV0FBQTtBQ0NOIiwiZmlsZSI6ImNhdGVnb3J5LWNyZWF0ZS1mb3JtLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmRpYWxvZyB7XHJcbiAgJi1hY3Rpb25zLWNhc3RvbSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIH1cclxuICAmLXRpdGxlLWNhc3RvbSB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgfVxyXG4gICYtZm9ybS1jYXN0b20ge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICAmLWl0ZW0ge1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbiIsIi5kaWFsb2ctYWN0aW9ucy1jYXN0b20ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59XG4uZGlhbG9nLXRpdGxlLWNhc3RvbSB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbi5kaWFsb2ctZm9ybS1jYXN0b20ge1xuICB3aWR0aDogMTAwJTtcbn1cbi5kaWFsb2ctZm9ybS1jYXN0b20taXRlbSB7XG4gIHdpZHRoOiAxMDAlO1xufSJdfQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}